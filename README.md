# 俳優の政治的発言が映画の成功を左右するか
ハリウッド俳優の政治的発言がアメリカ映画の興行収入・ROIに与える影響の分析

## 概要
このプロジェクトは、映画公開前後にキャストに関する「政治的なニュース」がどの程度報道されたかを定量化し、それが映画の興行収入 (Revenue) や 投資対効果 (ROI)に与える影響を統計的に分析します。
Kaggleの映画データセットとGoogle Newsの検索結果を結合し、頻度論的アプローチ（Statsmodels）とベイズ統計的アプローチ（PyMC）の両方を用いてモデリングを行います。

## ディレクトリ構成

```
.
├── .venv/                      # 仮想環境
├── notebooks/                  # jupyter notebook
│
├── new_data/                       # データセット保存用
├── new_image/                      # 分析結果のグラフ保存用
├── new_src/                        # ソースコード格納ディレクトリ
│   ├── fetch_movie_news.py         # ニュース取得
│   ├── data_processing.py          # 前処理・特徴量エンジニアリング用モジュール
│   ├── visualization.py            # 可視化・グラフ描画用モジュール
│   ├── bayesian_analysis.py        # ベイズ統計分析用モジュール (MCMC, PyMC)
│   └── main.py                     # 頻度論的統計分析 (OLS, ロジスティック回帰, 感度分析)・ベイズ統計分析
│
├── data/                       # データセット保存用
├── image/                      # 分析結果のグラフ保存用
├── src/                        # ソースコード格納ディレクトリ
│   ├── fetch_movie_news_1m.py      # ニュース取得 (公開前後1ヶ月)
│   ├── fetch_movie_news_3m.py      # ニュース取得 (公開前3ヶ月〜後2週間)
│   ├── analyze_political_news_1m.py # ニュース記事の分析・データ加工 (1mデータ用)
│   ├── analyze_political_news_3m.py # ニュース記事の分析・データ加工(3mデータ用)
│   ├── data_processing.py          # 前処理・特徴量エンジニアリング用モジュール
│   ├── visualization.py            # 可視化・グラフ描画用モジュール
│   ├── main.py                     # 頻度論的統計分析 (OLS, ロジスティック回帰, 感度分析)
│   └── bayesian_analysis.py        # ベイズ統計分析 (MCMC, PyMC)
│
├── .gitignore                  # githubにアップロードしないファイル
├── requirements.txt            # 必要なパッケージ
└── README.md                   # 本ファイル
```

## 必要要件

Python 3.8 以上。必要なパッケージはrequirements.txtに記載してあります。

## 環境構築と実行手順

分析は以下の3ステップで行います。

### 0\. 環境構築
プロジェクトのルートディレクトリで以下のコマンドを実行し、仮想環境を作成して依存パッケージをインストールしてください。
```bash
# 仮想環境 (.venv) の作成
python -m venv .venv

# 仮想環境の有効化
# Windowsの場合:
.venv\Scripts\activate
# Mac/Linuxの場合:
source .venv/bin/activate

# 依存パッケージのインストール
pip install -r requirements.txt

# ソースコードが含まれるフォルダにアクセス
cd new_src
```

### 1\. データの取得

Kaggleから映画データをダウンロードし、Google Newsからキャストに関するニュースタイトルを取得します。

```bash
python fetch_movie_news.py
```

*出力: `new_data/movies_with_news.csv`*

### 2\. データ加工・統計モデリング
**俳優の有名度の計算**
各俳優ごとに直近3年間の出演作品の興行収入の平均を算出し、主要俳優の平均を各映画の俳優の有名度とする。

**A. 頻度論的分析 (Frequentist Analysis)**
Statsmodelsを用いたOLS（最小二乗法）およびロジスティック回帰を実行します。閾値の感度分析も含まれます。

**B. ベイズ統計分析 (Bayesian Analysis)**
PyMCを用いたMCMCサンプリングを行い、事後分布の推定を行います。特に「政治的ニュースの割合」と「ニュース総数」の交互作用項に注目します。

```bash
python main.py
```

*出力: 回帰分析のサマリ、分布図、感度分析プロット、トレースプロット、事後分布プロットなどが `new_image/` フォルダに保存されます。*

## 分析内容の詳細
俳優による政治的な報道の多さ（political_news_count）が、映画の興行収入（Revenue）および投資対効果（ROI）に与える影響について統計モデルを用いて分析を行った。\par
当初の調査では、全ニュース記事に対する政治的記事の「割合（political_ratio）」を説明変数としていた。しかしpolitical_ratioはデータの大半がデータがゼロ付近に大きく偏在しており分析が困難であった。またデータ収集に用いた pygooglenews には1映画あたり100件という取得上限があり、対象の約67％（948件）がこの上限に到達していた。Google Newsのアルゴリズムは関連度順であるため、これら上限到達データは無作為抽出とは見なせず、選択バイアスの懸念があった。 そのため、検索クエリに政治的語彙を含めることで対象を絞り込む手法へ変更した。これにより上限到達データは全体の3.68％（53件）まで減少し、上限ダミー変数を要さずに分析可能なデータセットを構築した。\par
また新しい手法では「割合」ではなく記事の「件数」を扱うため、俳優の知名度がニュース数に与える影響を排除する必要がある。そのため、俳優の有名度を表す変数を新たに定義し、共変量としてモデルに投入した。\par
さらに頻度論的な仮説検定におけるp値の解釈の限界を考慮し、ベイズ推定を採用した。事前分布を設定し、回帰係数の事後分布を推定することで、効果の大きさおよびその不確実性を直接的に評価する。
### 1\. 特徴量エンジニアリング (`data_processing.py`)

  * **目的変数:**
      * `revenue_log`: 興行収入の対数
      * `roi_log`: ROI (Revenue/Budget) の対数
      * `is_high_roi`: ROIが中央値を超えているか (Binary)
  * **説明変数:**
      * `political_news_count`: ニュースタイトル中の政治的単語の割合
      * `over_100news`: ニュース件数が上限(100件)に達しているか
      * `budget_log`: 予算の対数
      * `belong_to_collection`: シリーズ作品かどうか
      * `Genre`: ジャンル（Top10）

### 2\. 可視化 (`visualization.py`)
  * ヒストグラム
  * 箱ひげ図
  * ヒートマップ
  * 回帰分析結果のサマリ画像出力
  * ベイズモデルの事後分布の画像出力

### 3\. モデリング
  * **Model 1 & 2 (OLS):** `revenue_log` および `roi_log` に対する線形回帰。
  * **Model 3 (Logistic):** `is_high_roi` に対するロジスティック回帰。
  * **感度分析:** `is_high_roi` を決定する閾値を変動させた際、説明変数の係数がどう変化するかを確認。